<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWGP Seva Portal - Contact Details</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        * {
            font-family: "Roboto", sans-serif;
        }

        body {
            background-color: #fff;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .navbar {
            background-color: #1200ff;
            color: white;
            padding: 10px;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .help-btn {
            background-color: red;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
        }

        .form-container {
            margin-top: 80px;
            max-width: 500px;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background-color: #0048ff;
            border: none;
            width: 100%;
        }

        .btn-primary:hover {
            background-color: #0037cc;
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="d-flex align-items-center ms-3">
            <img src="/images/logo.jpg" alt="AWGP Logo" width="50" height="50" class="rounded-circle">
            <h4 class="ms-2">AWGP Seva Portal</h4>
        </div>
        <button class="help-btn" onclick="window.location.href='/api/v1/help'">HELP</button>
    </nav>

    <p class="mt-4"><b>Feed your contact details that one can contact you.</b></p>

    <div class="form-container">
        <h4>Contact Details</h4>
        <form>
            <div class="mb-3">
                <input type="text" class="form-control" placeholder="Full name">
            </div>
            <div class="mb-3">
                <input type="text" class="form-control" placeholder="Phone number">
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <select id="state" class="form-control" data-bs-display="static">
                        <option selected disabled>Select State</option>
                        <option value="Andhra Pradesh">Andhra Pradesh</option>
                        <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                        <option value="Assam">Assam</option>
                        <option value="Bihar">Bihar</option>
                        <option value="Chhattisgarh">Chhattisgarh</option>
                        <option value="Delhi">Delhi</option>
                        <option value="Goa">Goa</option>
                        <option value="Gujarat">Gujarat</option>
                        <option value="Haryana">Haryana</option>
                        <option value="Himachal Pradesh">Himachal Pradesh</option>
                        <option value="Jharkhand">Jharkhand</option>
                        <option value="Karnataka">Karnataka</option>
                        <option value="Kerala">Kerala</option>
                        <option value="Madhya Pradesh">Madhya Pradesh</option>
                        <option value="Maharashtra">Maharashtra</option>
                        <option value="Manipur">Manipur</option>
                        <option value="Meghalaya">Meghalaya</option>
                        <option value="Mizoram">Mizoram</option>
                        <option value="Nagaland">Nagaland</option>
                        <option value="Odisha">Odisha</option>
                        <option value="Punjab">Punjab</option>
                        <option value="Rajasthan">Rajasthan</option>
                        <option value="Sikkim">Sikkim</option>
                        <option value="Tamil Nadu">Tamil Nadu</option>
                        <option value="Telangana">Telangana</option>
                        <option value="Tripura">Tripura</option>
                        <option value="Uttar Pradesh">Uttar Pradesh</option>
                        <option value="Uttarakhand">Uttarakhand</option>
                        <option value="West Bengal">West Bengal</option>
                    </select>

                </div>
                <div class="col-md-6">
                    <select id="district" class="form-control">
                        <option selected disabled>Select District</option>
                    </select>
                </div>
            </div>
            <div class="mb-3">
                <input type="text" class="form-control" placeholder="Address">
            </div>
            <div class="mb-3">
                <input type="text" class="form-control" placeholder="Pin Code">
            </div>
            <button type="submit" class="btn btn-primary">Save Details</button>
        </form>
    </div>

    <p class="mt-5">
        ओं भूर्भुवः स्वः तत्सवितुर्वरेण्यं भर्गो देवस्य धीमहि धियो यो नः प्रचोदयात्॥
    </p>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const stateSelect = document.getElementById("state");
            const districtSelect = document.getElementById("district");

            const stateDistrictMap = {
                "Andhra Pradesh": ["Anantapur", "Chittoor", "East Godavari", "Guntur", "Krishna", "Kurnool", "Nellore", "Prakasam", "Srikakulam", "Visakhapatnam", "Vizianagaram", "West Godavari", "YSR Kadapa"],
                "Arunachal Pradesh": ["Anjaw", "Changlang", "Dibang Valley", "East Kameng", "East Siang", "Kamle", "Kra Daadi", "Kurung Kumey", "Lepa Rada", "Lohit", "Longding", "Lower Dibang Valley", "Lower Siang", "Lower Subansiri", "Namsai", "Pakke Kessang", "Papum Pare", "Shi Yomi", "Siang", "Tawang", "Tirap", "Upper Siang", "Upper Subansiri", "West Kameng", "West Siang"],
                "Assam": ["Baksa", "Barpeta", "Biswanath", "Bongaigaon", "Cachar", "Charaideo", "Chirang", "Darrang", "Dhemaji", "Dhubri", "Dibrugarh", "Goalpara", "Golaghat", "Hailakandi", "Hojai", "Jorhat", "Kamrup", "Kamrup Metropolitan", "Karbi Anglong", "Karimganj", "Kokrajhar", "Lakhimpur", "Majuli", "Morigaon", "Nagaon", "Nalbari", "Dima Hasao", "Sivasagar", "Sonitpur", "South Salmara-Mankachar", "Tinsukia", "Udalguri", "West Karbi Anglong"],
                "Bihar": ["Araria", "Arwal", "Aurangabad", "Banka", "Begusarai", "Bhagalpur", "Bhojpur", "Buxar", "Darbhanga", "East Champaran", "Gaya", "Gopalganj", "Jamui", "Jehanabad", "Kaimur", "Katihar", "Khagaria", "Kishanganj", "Lakhisarai", "Madhepura", "Madhubani", "Munger", "Muzaffarpur", "Nalanda", "Nawada", "Patna", "Purnia", "Rohtas", "Saharsa", "Samastipur", "Saran", "Sheikhpura", "Sheohar", "Sitamarhi", "Siwan", "Supaul", "Vaishali", "West Champaran"],
                "Chhattisgarh": ["Balod", "Baloda Bazar", "Balrampur", "Bastar", "Bemetara", "Bijapur", "Bilaspur", "Dantewada", "Dhamtari", "Durg", "Gariaband", "Gaurela-Pendra-Marwahi", "Janjgir-Champa", "Jashpur", "Kanker", "Kawardha", "Kondagaon", "Korba", "Koriya", "Mahasamund", "Mungeli", "Narayanpur", "Raigarh", "Raipur", "Rajnandgaon", "Sukma", "Surajpur", "Surguja"],
                "Delhi": ["Central Delhi", "East Delhi", "New Delhi", "North Delhi", "North East Delhi", "North West Delhi", "Shahdara", "South Delhi", "South East Delhi", "South West Delhi", "West Delhi"],
                "Goa": ["North Goa", "South Goa"],
                "Gujarat": ["Ahmedabad", "Surat", "Vadodara", "Rajkot", "Bhavnagar", "Jamnagar", "Gandhinagar", "Junagadh", "Anand", "Navsari"],
                "Haryana": ["Ambala", "Faridabad", "Gurgaon", "Hisar", "Karnal", "Kurukshetra", "Panipat", "Rohtak", "Sonipat", "Yamunanagar"],
                "Himachal Pradesh": ["Shimla", "Mandi", "Kullu", "Kangra", "Chamba", "Solan", "Bilaspur", "Hamirpur", "Una", "Sirmaur"],
                "Jharkhand": ["Ranchi", "Jamshedpur", "Dhanbad", "Bokaro", "Hazaribagh", "Deoghar", "Palamu", "Giridih", "Ramgarh", "Dumka"],
                "Karnataka": ["Bangalore", "Mysore", "Hubli", "Mangalore", "Belgaum", "Dharwad", "Tumkur", "Bijapur", "Gulbarga", "Shimoga"],
                "Kerala": ["Thiruvananthapuram", "Kochi", "Kozhikode", "Thrissur", "Kannur", "Kollam", "Alappuzha", "Palakkad", "Kottayam", "Malappuram"],
                "Madhya Pradesh": ["Bhopal", "Indore", "Jabalpur", "Gwalior", "Ujjain", "Sagar", "Ratlam", "Rewa", "Satna", "Dewas"],
                "Maharashtra": ["Mumbai", "Pune", "Nagpur", "Nashik", "Aurangabad", "Solapur", "Thane", "Kolhapur", "Amravati", "Satara"],
                "Manipur": ["Bishnupur", "Chandel", "Churachandpur", "Imphal East", "Imphal West", "Jiribam", "Kakching", "Kamjong", "Kangpokpi", "Noney", "Pherzawl", "Senapati", "Tamenglong", "Tengnoupal", "Thoubal", "Ukhrul"],
                "Meghalaya": ["East Garo Hills", "East Jaintia Hills", "East Khasi Hills", "North Garo Hills", "Ri Bhoi", "South Garo Hills", "South West Garo Hills", "South West Khasi Hills", "West Garo Hills", "West Jaintia Hills", "West Khasi Hills"],
                "Mizoram": ["Aizawl", "Champhai", "Kolasib", "Lawngtlai", "Lunglei", "Mamit", "Saiha", "Serchhip"],
                "Nagaland": ["Dimapur", "Kiphire", "Kohima", "Longleng", "Mokokchung", "Mon", "Peren", "Phek", "Tuensang", "Wokha", "Zunheboto"],
                "Odisha": ["Bhubaneswar", "Cuttack", "Puri", "Rourkela"],
                "Punjab": ["Amritsar", "Ludhiana", "Jalandhar", "Patiala"],
                "Rajasthan": ["Jaipur", "Jodhpur", "Udaipur", "Kota"],
                "Sikkim": ["East Sikkim", "North Sikkim", "South Sikkim", "West Sikkim"],
                "Tamil Nadu": ["Chennai", "Coimbatore", "Madurai", "Tiruchirappalli"],
                "Telangana": ["Hyderabad", "Warangal", "Karimnagar", "Nizamabad"],
                "Tripura": ["Agartala", "Udaipur", "Dharmanagar", "Kailashahar"],
                "Uttar Pradesh": ["Lucknow", "Kanpur", "Varanasi", "Agra"],
                "Uttarakhand": ["Dehradun", "Haridwar", "Nainital", "Almora"],
                "West Bengal": ["Kolkata", "Howrah", "Durgapur", "Siliguri"]
            };


            stateSelect.addEventListener("change", function () {
                const selectedState = stateSelect.value;
                districtSelect.innerHTML = "<option selected disabled>Select District</option>";

                if (stateDistrictMap[selectedState]) {
                    stateDistrictMap[selectedState].forEach(district => {
                        const option = document.createElement("option");
                        option.value = district;
                        option.textContent = district;
                        districtSelect.appendChild(option);
                    });
                }
            });

            const form = document.querySelector("form");

            form.addEventListener("submit", async function (event) {
                event.preventDefault();

                const name = document.querySelector("input[placeholder='Full name']").value.trim();
                const phone = document.querySelector("input[placeholder='Phone number']").value.trim();
                const state = stateSelect.value;
                const district = districtSelect.value;
                const address = document.querySelector("input[placeholder='Address']").value.trim();
                const pinCode = document.querySelector("input[placeholder='Pin Code']").value.trim();

                if (!name || !phone || !state || !district || !address || !pinCode) {
                    alert("All fields are required!");
                    return;
                }

                const contactData = { name, phone, state, district, address, pinCode };

                try {
                    const response = await fetch("/api/v1/submit-contactDetails", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(contactData)
                    });

                    const result = await response.json();
                    if (response.ok) {
                        alert("Details saved successfully!");
                        window.location.href = result.redirectUrl; // Manually redirect
                    } else {
                        alert("Error: " + result.message);
                    }
                } catch (error) {
                    console.error("Error submitting contact details:", error);
                    alert("Failed to send details. Please try again.");
                }
            });
        });

    </script>
</body>

</html>